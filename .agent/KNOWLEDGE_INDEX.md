# ARå…¬å¸è´¢åŠ¡ç®¡ç†ç³»ç»Ÿ - AI çŸ¥è¯†ç´¢å¼•

> **ç”¨é€”**: æœ¬æ–‡ä»¶æ˜¯ AI åŠ©æ‰‹ï¼ˆAntigravityï¼‰çš„çŸ¥è¯†ç´¢å¼•ï¼Œå¸®åŠ©å¿«é€Ÿå®šä½é¡¹ç›®æ–‡æ¡£å’Œä»£ç ã€‚
> **æ›´æ–°æ—¶é—´**: 2025-12-08

---

## ğŸ“š é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: caiwu-main (ARå…¬å¸è´¢åŠ¡ç®¡ç†ç³»ç»Ÿ)  
**æŠ€æœ¯æ ˆ**: React + TypeScript + Vite (å‰ç«¯) | Hono + Cloudflare Workers + D1 (åç«¯)  
**é¡¹ç›®è§„æ¨¡**: 166 åç«¯æ–‡ä»¶ + 222 å‰ç«¯æ–‡ä»¶  

---

## ğŸ—‚ï¸ æ–‡æ¡£åœ°å›¾

### 1. å…¥é—¨ä¸æ¦‚è¿°
| æ–‡æ¡£ | è·¯å¾„ | å†…å®¹ |
|------|------|------|
| ç³»ç»Ÿæ¦‚è¿° | `.qoder/repowiki/zh/content/ç³»ç»Ÿæ¦‚è¿°.md` | ç³»ç»Ÿæ ¸å¿ƒç›®æ ‡ã€åŠŸèƒ½å…¨æ™¯ã€æŠ€æœ¯æ¶æ„ |
| å¿«é€Ÿå…¥é—¨ | `.qoder/repowiki/zh/content/å¿«é€Ÿå…¥é—¨.md` | å¼€å‘ç¯å¢ƒæ­å»ºã€å¯åŠ¨å‘½ä»¤ã€å¸¸è§é—®é¢˜ |

### 2. æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
| æ¨¡å— | è·¯å¾„ | æ ¸å¿ƒæœåŠ¡/è·¯ç”± |
|------|------|--------------|
| å‘˜å·¥ç®¡ç† | `.qoder/repowiki/zh/content/æ ¸å¿ƒåŠŸèƒ½æ¨¡å—/å‘˜å·¥ç®¡ç†æ¨¡å—.md` | `EmployeeService.ts`, `employees.ts` |
| è–ªèµ„ç®¡ç† | `.qoder/repowiki/zh/content/æ ¸å¿ƒåŠŸèƒ½æ¨¡å—/è–ªèµ„ç®¡ç†æ¨¡å—.md` | `SalaryService.ts`, `salaries.ts` |
| è´¢åŠ¡ç®¡ç† | `.qoder/repowiki/zh/content/æ ¸å¿ƒåŠŸèƒ½æ¨¡å—/è´¢åŠ¡ç®¡ç†æ¨¡å—.md` | `FinanceService.ts`, `flows.ts`, `ar-ap.ts` |
| èµ„äº§ç®¡ç† | `.qoder/repowiki/zh/content/æ ¸å¿ƒåŠŸèƒ½æ¨¡å—/èµ„äº§ç®¡ç†æ¨¡å—.md` | `FixedAssetService.ts`, `RentalService.ts` |
| æŠ¥é”€ä¸å€Ÿæ¬¾ | `.qoder/repowiki/zh/content/æ ¸å¿ƒåŠŸèƒ½æ¨¡å—/æŠ¥é”€ä¸å€Ÿæ¬¾æ¨¡å—.md` | `borrowings.ts`, `expenses.ts` |
| ç³»ç»Ÿè®¾ç½® | `.qoder/repowiki/zh/content/æ ¸å¿ƒåŠŸèƒ½æ¨¡å—/ç³»ç»Ÿè®¾ç½®æ¨¡å—.md` | `system.ts`, `master-data/` |

### 3. API å‚è€ƒ
| åˆ†ç±» | è·¯å¾„ |
|------|------|
| API æ€»è§ˆ | `.qoder/repowiki/zh/content/APIå‚è€ƒ/APIå‚è€ƒ.md` |
| è®¤è¯ API | `.qoder/repowiki/zh/content/APIå‚è€ƒ/è®¤è¯API.md` |
| è´¢åŠ¡ç®¡ç† API | `.qoder/repowiki/zh/content/APIå‚è€ƒ/è´¢åŠ¡ç®¡ç†API/` |
| å‘˜å·¥ç®¡ç† API | `.qoder/repowiki/zh/content/APIå‚è€ƒ/å‘˜å·¥ç®¡ç†API/` |
| ä¸»æ•°æ®ç®¡ç† API | `.qoder/repowiki/zh/content/APIå‚è€ƒ/ä¸»æ•°æ®ç®¡ç†API/` |
| ç³»ç»Ÿç®¡ç† API | `.qoder/repowiki/zh/content/APIå‚è€ƒ/ç³»ç»Ÿç®¡ç†API/` |
| èµ„äº§ç®¡ç† API | `.qoder/repowiki/zh/content/APIå‚è€ƒ/èµ„äº§ç®¡ç†API/` |
| æŠ¥è¡¨ä¸­å¿ƒ API | `.qoder/repowiki/zh/content/APIå‚è€ƒ/æŠ¥è¡¨ä¸­å¿ƒAPI.md` |
| å®¡æ‰¹æµç¨‹ API | `.qoder/repowiki/zh/content/APIå‚è€ƒ/å®¡æ‰¹æµç¨‹API.md` |
| æ•°æ®å¯¼å…¥ API | `.qoder/repowiki/zh/content/APIå‚è€ƒ/æ•°æ®å¯¼å…¥API.md` |

### 4. æŠ€æœ¯æ¶æ„
| ä¸»é¢˜ | è·¯å¾„ |
|------|------|
| æ€»è§ˆ | `.qoder/repowiki/zh/content/æŠ€æœ¯æ ˆä¸æ¶æ„/æŠ€æœ¯æ ˆä¸æ¶æ„.md` |
| å‰ç«¯æ¶æ„ | `.qoder/repowiki/zh/content/æŠ€æœ¯æ ˆä¸æ¶æ„/å‰ç«¯æ¶æ„/` |
| åç«¯æ¶æ„ | `.qoder/repowiki/zh/content/æŠ€æœ¯æ ˆä¸æ¶æ„/åç«¯æ¶æ„/` |
| éƒ¨ç½²ä¸åŸºç¡€è®¾æ–½ | `.qoder/repowiki/zh/content/æŠ€æœ¯æ ˆä¸æ¶æ„/éƒ¨ç½²ä¸åŸºç¡€è®¾æ–½/` |

### 5. è®¤è¯ä¸æƒé™ç³»ç»Ÿ
| ä¸»é¢˜ | è·¯å¾„ |
|------|------|
| æ€»è§ˆ | `.qoder/repowiki/zh/content/è®¤è¯ä¸æƒé™ç³»ç»Ÿ/è®¤è¯ä¸æƒé™ç³»ç»Ÿ.md` |
| JWT è®¤è¯ | `.qoder/repowiki/zh/content/è®¤è¯ä¸æƒé™ç³»ç»Ÿ/JWTè®¤è¯ç³»ç»Ÿ.md` |
| RBAC æƒé™æ§åˆ¶ | `.qoder/repowiki/zh/content/è®¤è¯ä¸æƒé™ç³»ç»Ÿ/RBACæƒé™æ§åˆ¶ç³»ç»Ÿ/` |
| åŒå› ç´ è®¤è¯ (TOTP) | `.qoder/repowiki/zh/content/è®¤è¯ä¸æƒé™ç³»ç»Ÿ/åŒå› ç´ è®¤è¯(TOTP)/` |

### 6. æ•°æ®åº“è®¾è®¡
| ä¸»é¢˜ | è·¯å¾„ |
|------|------|
| ç³»ç»Ÿæ ¸å¿ƒæ•°æ®æ¨¡å‹ | `.qoder/repowiki/zh/content/æ•°æ®åº“è®¾è®¡/ç³»ç»Ÿæ ¸å¿ƒæ•°æ®æ¨¡å‹/` |
| ç»„ç»‡æ¶æ„æ•°æ®æ¨¡å‹ | `.qoder/repowiki/zh/content/æ•°æ®åº“è®¾è®¡/ç»„ç»‡æ¶æ„æ•°æ®æ¨¡å‹/` |
| è´¢åŠ¡æ ¸å¿ƒæ•°æ®æ¨¡å‹ | `.qoder/repowiki/zh/content/æ•°æ®åº“è®¾è®¡/è´¢åŠ¡æ ¸å¿ƒæ•°æ®æ¨¡å‹/` |
| èµ„äº§ç®¡ç†æ•°æ®æ¨¡å‹ | `.qoder/repowiki/zh/content/æ•°æ®åº“è®¾è®¡/èµ„äº§ç®¡ç†æ•°æ®æ¨¡å‹/` |
| å‘˜å·¥ç›¸å…³æ•°æ®æ¨¡å‹ | `.qoder/repowiki/zh/content/æ•°æ®åº“è®¾è®¡/å‘˜å·¥ç›¸å…³æ•°æ®æ¨¡å‹/` |
| åº”æ”¶åº”ä»˜æ•°æ®æ¨¡å‹ | `.qoder/repowiki/zh/content/æ•°æ®åº“è®¾è®¡/åº”æ”¶åº”ä»˜æ•°æ®æ¨¡å‹/` |
| å®¡æ‰¹æµç¨‹æ•°æ®æ¨¡å‹ | `.qoder/repowiki/zh/content/æ•°æ®åº“è®¾è®¡/å®¡æ‰¹æµç¨‹æ•°æ®æ¨¡å‹/` |

### 7. å¼€å‘æŒ‡å—
| ä¸»é¢˜ | è·¯å¾„ |
|------|------|
| æ€»è§ˆ | `.qoder/repowiki/zh/content/å¼€å‘æŒ‡å—/å¼€å‘æŒ‡å—.md` |
| ç¼–ç è§„èŒƒ | `.qoder/repowiki/zh/content/å¼€å‘æŒ‡å—/ç¼–ç è§„èŒƒ/` |
| æ€§èƒ½ä¼˜åŒ– | `.qoder/repowiki/zh/content/å¼€å‘æŒ‡å—/æ€§èƒ½ä¼˜åŒ–/` |
| æµ‹è¯•ç­–ç•¥ | `.qoder/repowiki/zh/content/å¼€å‘æŒ‡å—/æµ‹è¯•ç­–ç•¥/` |

### 8. éƒ¨ç½²ä¸è¿ç»´
| ä¸»é¢˜ | è·¯å¾„ |
|------|------|
| æ€»è§ˆ | `.qoder/repowiki/zh/content/éƒ¨ç½²ä¸è¿ç»´/éƒ¨ç½²ä¸è¿ç»´.md` |
| å‰ç«¯éƒ¨ç½² | `.qoder/repowiki/zh/content/éƒ¨ç½²ä¸è¿ç»´/å‰ç«¯åº”ç”¨éƒ¨ç½².md` |
| åç«¯éƒ¨ç½² | `.qoder/repowiki/zh/content/éƒ¨ç½²ä¸è¿ç»´/åç«¯æœåŠ¡éƒ¨ç½².md` |
| æ•°æ®åº“è¿ç§» | `.qoder/repowiki/zh/content/éƒ¨ç½²ä¸è¿ç»´/æ•°æ®åº“è¿ç§»ç®¡ç†.md` |
| é‚®ä»¶æœåŠ¡ | `.qoder/repowiki/zh/content/éƒ¨ç½²ä¸è¿ç»´/é‚®ä»¶å·¥ä½œå™¨éƒ¨ç½².md` |
| ç›‘æ§ä¸æ—¥å¿— | `.qoder/repowiki/zh/content/éƒ¨ç½²ä¸è¿ç»´/ç›‘æ§ä¸æ—¥å¿—.md` |

---

## ğŸ”§ å…³é”®ä»£ç è·¯å¾„

### åç«¯æ ¸å¿ƒ
```
backend/src/
â”œâ”€â”€ index.ts                 # åº”ç”¨å…¥å£ã€è·¯ç”±æ³¨å†Œ
â”œâ”€â”€ middleware/
â”‚   â”œâ”€â”€ permission.ts        # æƒé™ä¸­é—´ä»¶
â”‚   â””â”€â”€ di.ts                # ä¾èµ–æ³¨å…¥
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ EmployeeService.ts   # å‘˜å·¥æœåŠ¡
â”‚   â”œâ”€â”€ FinanceService.ts    # è´¢åŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ SalaryService.ts     # è–ªèµ„æœåŠ¡
â”‚   â”œâ”€â”€ AuthService.ts       # è®¤è¯æœåŠ¡
â”‚   â”œâ”€â”€ UserService.ts       # ç”¨æˆ·æœåŠ¡
â”‚   â”œâ”€â”€ MasterDataService.ts # ä¸»æ•°æ®æœåŠ¡
â”‚   â””â”€â”€ ...
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ auth.ts              # è®¤è¯è·¯ç”±
â”‚   â”œâ”€â”€ employees.ts         # å‘˜å·¥è·¯ç”±
â”‚   â”œâ”€â”€ flows.ts             # è´¢åŠ¡æµæ°´è·¯ç”±
â”‚   â”œâ”€â”€ ar-ap.ts             # åº”æ”¶åº”ä»˜è·¯ç”±
â”‚   â””â”€â”€ master-data/         # ä¸»æ•°æ®è·¯ç”±
â””â”€â”€ db/
    â”œâ”€â”€ schema.ts            # Drizzle ORM è¡¨å®šä¹‰
    â””â”€â”€ migration_*.sql      # æ•°æ®åº“è¿ç§»
```

### å‰ç«¯æ ¸å¿ƒ
```
frontend/src/
â”œâ”€â”€ features/
â”‚   â”œâ”€â”€ auth/                # è®¤è¯æ¨¡å—
â”‚   â”œâ”€â”€ employees/           # å‘˜å·¥ç®¡ç†
â”‚   â”œâ”€â”€ finance/             # è´¢åŠ¡ç®¡ç†
â”‚   â”œâ”€â”€ reports/             # æŠ¥è¡¨ä¸­å¿ƒ
â”‚   â””â”€â”€ ...
â”œâ”€â”€ hooks/                   # è‡ªå®šä¹‰ Hooks
â”œâ”€â”€ components/              # å…¬å…±ç»„ä»¶
â”œâ”€â”€ router/                  # è·¯ç”±é…ç½®
â””â”€â”€ config/
    â”œâ”€â”€ menu.ts              # èœå•é…ç½®
    â””â”€â”€ theme.ts             # ä¸»é¢˜é…ç½®
```

---

## ğŸ” å®‰å…¨æ¶æ„ (äº”å±‚å®‰å…¨)

1. **ç½‘ç»œå±‚**: IP ç™½åå• (`IPWhitelistService.ts`)
2. **è®¤è¯å±‚**: JWT + TOTP åŒå› ç´  (`AuthService.ts`, `TotpService.ts`)
3. **åŠŸèƒ½æƒé™å±‚**: RBAC åŸºäºèŒä½ (`permissions.ts`)
4. **æ•°æ®èŒƒå›´å±‚**: æ•°æ®è®¿é—®è¿‡æ»¤ (`getDataAccessFilter`)
5. **å®¡æ‰¹æµç¨‹å±‚**: ä¸šåŠ¡å®¡æ‰¹æ§åˆ¶ (`ApprovalService.ts`)

---

## ğŸ·ï¸ å¿«é€ŸæŸ¥æ‰¾æŒ‡å—

### æŒ‰é—®é¢˜ç±»å‹æŸ¥æ‰¾
| é—®é¢˜ç±»å‹ | åº”é˜…è¯»çš„æ–‡æ¡£ | å…³é”®æ–‡ä»¶ |
|---------|-------------|---------|
| "å¦‚ä½•æ·»åŠ æ–°å‘˜å·¥" | å‘˜å·¥ç®¡ç†æ¨¡å—.md | `EmployeeService.ts`, `CreateEmployee.tsx` |
| "å¦‚ä½•å¤„ç†è–ªèµ„" | è–ªèµ„ç®¡ç†æ¨¡å—.md | `SalaryService.ts`, `salaries.ts` |
| "æƒé™å¦‚ä½•æ§åˆ¶" | RBACæƒé™æ§åˆ¶ç³»ç»Ÿ/ | `permissions.ts`, `permission.ts` |
| "è´¢åŠ¡æµæ°´æ€ä¹ˆè®°å½•" | è´¢åŠ¡ç®¡ç†æ¨¡å—.md | `FinanceService.ts`, `flows.ts` |
| "æŠ¥è¡¨å¦‚ä½•ç”Ÿæˆ" | æŠ¥è¡¨ä¸­å¿ƒAPI.md | `reports.ts`, `ReportService.ts` |
| "å¦‚ä½•éƒ¨ç½²" | éƒ¨ç½²ä¸è¿ç»´/ | `wrangler.toml` |
| "æ•°æ®åº“è¡¨ç»“æ„" | æ•°æ®åº“è®¾è®¡/ | `schema.ts` |

---

## ğŸ“‹ å·¥ä½œæµå¼•ç”¨

æŸ¥çœ‹ `.agent/workflows/` ç›®å½•è·å–å¸¸è§å¼€å‘ä»»åŠ¡çš„æ­¥éª¤æŒ‡å—ã€‚
